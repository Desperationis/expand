# AnyUserNoEscalation()
# [ ExistenceProbe("~/anaconda3") ]
# Black is the uncompromising Python code formatter. By using it, you agree to cede control over minutiae of hand-formatting. In return, Black gives you speed, determinism, and freedom from pycodestyle nagging about formatting. You will save time and mental energy for more important matters.

- name: "Install black"
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    conda: ". {{ lookup('env', 'HOME') }}/anaconda3/bin/activate && conda"
  tasks:
    - name: "Create Env if it doesn't exist"
      register: aptout
      shell:
        cmd: "if ! ( {{ conda }} env list | grep -q custom ) ; then {{ conda }} create -y -n custom; fi"
    - debug: var=aptout

    - name: "Install via pip"
      register: aptout
      shell:
        cmd: "{{ conda }} activate custom && python3 -m pip install -y black"
    - debug: var=aptout

